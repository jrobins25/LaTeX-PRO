/* formatters.ts
    makes hashes, stitches together the .tex file contents and command prompts */
import { Md5 } from "ts-md5";
import { FileSystemAdapter } from "obsidian";
import * as path from "path";
import * as os from 'os';
// import latexProSettings from "../main"
// makes content for the .tex file
export function formatLatexCode(documentClass, preamble, latexUserCode) {
    return (`
            ${documentClass}
            ${preamble}
            \\begin{document}
            \\begin{minipage}{525pt}
            ${latexUserCode}
            \\end{minipage}
            \\end{document}
            `);
}
// for every latex code a unique id
export function makeFileName(latexUserCode) {
    // without trim the key would be different for .tex files differing by spacebars etc
    return Md5.hashStr(latexUserCode.trim());
}
// exclude suffix
export function makeAbsoluteFilePath(folderPath, fileName) {
    return path.join(folderPath, fileName);
}
export function getObsidianRoot() {
    if (this.app.vault.adapter instanceof FileSystemAdapter) {
        const obsidianRoot = this.app.vault.adapter.getBasePath();
        return obsidianRoot;
    }
    else {
        console.error("Tried to find obsidian root outside of desktop");
        throw new Error("This feature is only supported on desktop");
    }
}
export function makeCacheFolderPath(cacheFolderName) {
    return path.join(getObsidianRoot(), cacheFolderName);
}
export function makeCacheFilePath(cacheFolderName, fileName // include suffix in argument
) {
    return path.join(makeCacheFolderPath(cacheFolderName), fileName);
}
// command that compiles latex in texFileName.tex file to make pdf
export function formatCompilationCmd(PathToLatexExe, filePath) {
    return (`${PathToLatexExe} -interaction=nonstopmode -halt-on-error ${filePath}.tex`);
}
export function formatConversionCmd(pathToMagick, dpi_setting, filePath) { return (`${pathToMagick} -density ${dpi_setting} ${filePath}.pdf -transparent white ${filePath}.png`); }
export function makeTempDirPrefixPath(name) { return path.join(os.tmpdir(), name); }
// const result = formatLatexCode("\\documentclass{standalone}","\\usepackage{amsmath}","$x^2$ is a cool function")
// const result = formatCompilationCmd("\\userIsGoon","goon")
// console.log(result)
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0dGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZvcm1hdHRlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7aUZBQ2lGO0FBQ2pGLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDN0IsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQzdDLE9BQU8sS0FBSyxJQUFJLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sS0FBSyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBQ3pCLHlDQUF5QztBQUl6QyxrQ0FBa0M7QUFDbEMsTUFBTSxVQUFVLGVBQWUsQ0FDM0IsYUFBc0IsRUFDdEIsUUFBaUIsRUFDakIsYUFBc0I7SUFHeEIsT0FBTSxDQUNJO2NBQ0UsYUFBYTtjQUNiLFFBQVE7OztjQUdSLGFBQWE7OzthQUdkLENBQ1YsQ0FBQTtBQUNGLENBQUM7QUFFRixtQ0FBbUM7QUFDbkMsTUFBTSxVQUFVLFlBQVksQ0FDcEIsYUFBc0I7SUFFdEIsb0ZBQW9GO0lBQ3BGLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtBQUM1QyxDQUFDO0FBRUwsaUJBQWlCO0FBQ2pCLE1BQU0sVUFBVSxvQkFBb0IsQ0FDNUIsVUFBbUIsRUFDbkIsUUFBaUI7SUFFakIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBQyxRQUFRLENBQUMsQ0FBQTtBQUN6QyxDQUFDO0FBRUwsTUFBTSxVQUFVLGVBQWU7SUFDM0IsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLFlBQVksaUJBQWlCLEVBQUM7UUFDcEQsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQ3pELE9BQU8sWUFBWSxDQUFBO0tBQ3RCO1NBQ0c7UUFDQSxPQUFPLENBQUMsS0FBSyxDQUFDLGdEQUFnRCxDQUFDLENBQUE7UUFDL0QsTUFBTSxJQUFJLEtBQUssQ0FBQywyQ0FBMkMsQ0FBQyxDQUFBO0tBQy9EO0FBQ0wsQ0FBQztBQUVELE1BQU0sVUFBVSxtQkFBbUIsQ0FDL0IsZUFBd0I7SUFFcEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFDLGVBQWUsQ0FBQyxDQUFBO0FBQ3ZELENBQUM7QUFFTCxNQUFNLFVBQVUsaUJBQWlCLENBQzdCLGVBQXdCLEVBQ3hCLFFBQWlCLENBQUMsNkJBQTZCOztJQUUzQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLEVBQUMsUUFBUSxDQUFDLENBQUE7QUFDbkUsQ0FBQztBQUVMLGtFQUFrRTtBQUNsRSxNQUFNLFVBQVUsb0JBQW9CLENBQ2hDLGNBQXVCLEVBQ3ZCLFFBQWlCO0lBRWIsT0FBTSxDQUFDLEdBQUcsY0FBYyw0Q0FBNEMsUUFBUSxNQUFNLENBQUMsQ0FBQTtBQUN2RixDQUFDO0FBRUwsTUFBTSxVQUFVLG1CQUFtQixDQUMvQixZQUFxQixFQUNyQixXQUFvQixFQUNwQixRQUFpQixJQUNkLE9BQU0sQ0FBQyxHQUFHLFlBQVksYUFBYSxXQUFXLElBQUksUUFBUSwyQkFBMkIsUUFBUSxNQUFNLENBQUMsQ0FBQSxDQUFBLENBQUM7QUFFNUcsTUFBTSxVQUFVLHFCQUFxQixDQUNqQyxJQUFhLElBQ1YsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBQyxJQUFJLENBQUMsQ0FBQSxDQUFDLENBQUM7QUFHM0MsbUhBQW1IO0FBQ25ILDZEQUE2RDtBQUU3RCxzQkFBc0IiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBmb3JtYXR0ZXJzLnRzIFxyXG4gICAgbWFrZXMgaGFzaGVzLCBzdGl0Y2hlcyB0b2dldGhlciB0aGUgLnRleCBmaWxlIGNvbnRlbnRzIGFuZCBjb21tYW5kIHByb21wdHMgKi9cclxuaW1wb3J0IHsgTWQ1IH0gZnJvbSBcInRzLW1kNVwiO1xyXG5pbXBvcnQgeyBGaWxlU3lzdGVtQWRhcHRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcclxuLy8gaW1wb3J0IGxhdGV4UHJvU2V0dGluZ3MgZnJvbSBcIi4uL21haW5cIlxyXG5cclxuXHJcblxyXG4vLyBtYWtlcyBjb250ZW50IGZvciB0aGUgLnRleCBmaWxlXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRMYXRleENvZGUoXHJcbiAgICBkb2N1bWVudENsYXNzIDogc3RyaW5nLFxyXG4gICAgcHJlYW1ibGUgOiBzdHJpbmcsXHJcbiAgICBsYXRleFVzZXJDb2RlIDogc3RyaW5nLFxyXG5cclxuICAgICl7XHJcblx0XHRyZXR1cm4oXHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgJHtkb2N1bWVudENsYXNzfVxyXG4gICAgICAgICAgICAke3ByZWFtYmxlfVxyXG4gICAgICAgICAgICBcXFxcYmVnaW57ZG9jdW1lbnR9XHJcbiAgICAgICAgICAgIFxcXFxiZWdpbnttaW5pcGFnZX17NTI1cHR9XHJcbiAgICAgICAgICAgICR7bGF0ZXhVc2VyQ29kZX1cclxuICAgICAgICAgICAgXFxcXGVuZHttaW5pcGFnZX1cclxuICAgICAgICAgICAgXFxcXGVuZHtkb2N1bWVudH1cclxuICAgICAgICAgICAgYFxyXG5cdFx0KVxyXG5cdH1cclxuXHJcbi8vIGZvciBldmVyeSBsYXRleCBjb2RlIGEgdW5pcXVlIGlkXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlRmlsZU5hbWUoXHJcbiAgICAgICAgbGF0ZXhVc2VyQ29kZSA6IHN0cmluZ1xyXG4gICAgKXtcclxuICAgICAgICAvLyB3aXRob3V0IHRyaW0gdGhlIGtleSB3b3VsZCBiZSBkaWZmZXJlbnQgZm9yIC50ZXggZmlsZXMgZGlmZmVyaW5nIGJ5IHNwYWNlYmFycyBldGNcclxuICAgICAgICByZXR1cm4gTWQ1Lmhhc2hTdHIobGF0ZXhVc2VyQ29kZS50cmltKCkpXHJcbiAgICB9XHJcblxyXG4vLyBleGNsdWRlIHN1ZmZpeFxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUFic29sdXRlRmlsZVBhdGgoXHJcbiAgICAgICAgZm9sZGVyUGF0aCA6IHN0cmluZyxcclxuICAgICAgICBmaWxlTmFtZSA6IHN0cmluZ1xyXG4gICAgKXtcclxuICAgICAgICByZXR1cm4gcGF0aC5qb2luKGZvbGRlclBhdGgsZmlsZU5hbWUpXHJcbiAgICB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T2JzaWRpYW5Sb290KCl7XHJcbiAgICBpZiAodGhpcy5hcHAudmF1bHQuYWRhcHRlciBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1BZGFwdGVyKXtcclxuICAgICAgICBjb25zdCBvYnNpZGlhblJvb3QgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKClcclxuICAgICAgICByZXR1cm4gb2JzaWRpYW5Sb290XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcmllZCB0byBmaW5kIG9ic2lkaWFuIHJvb3Qgb3V0c2lkZSBvZiBkZXNrdG9wXCIpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBmZWF0dXJlIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGRlc2t0b3BcIilcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VDYWNoZUZvbGRlclBhdGgoXHJcbiAgICBjYWNoZUZvbGRlck5hbWUgOiBzdHJpbmdcclxuICAgICl7XHJcbiAgICAgICAgcmV0dXJuIHBhdGguam9pbihnZXRPYnNpZGlhblJvb3QoKSxjYWNoZUZvbGRlck5hbWUpXHJcbiAgICB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNhY2hlRmlsZVBhdGgoXHJcbiAgICBjYWNoZUZvbGRlck5hbWUgOiBzdHJpbmcsXHJcbiAgICBmaWxlTmFtZSA6IHN0cmluZyAvLyBpbmNsdWRlIHN1ZmZpeCBpbiBhcmd1bWVudFxyXG4gICAgKXtcclxuICAgICAgICByZXR1cm4gcGF0aC5qb2luKG1ha2VDYWNoZUZvbGRlclBhdGgoY2FjaGVGb2xkZXJOYW1lKSxmaWxlTmFtZSlcclxuICAgIH1cclxuXHJcbi8vIGNvbW1hbmQgdGhhdCBjb21waWxlcyBsYXRleCBpbiB0ZXhGaWxlTmFtZS50ZXggZmlsZSB0byBtYWtlIHBkZlxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0Q29tcGlsYXRpb25DbWQoXHJcbiAgICBQYXRoVG9MYXRleEV4ZSA6IHN0cmluZyxcclxuICAgIGZpbGVQYXRoIDogc3RyaW5nLFxyXG4gICAgKXtcclxuICAgICAgICByZXR1cm4oYCR7UGF0aFRvTGF0ZXhFeGV9IC1pbnRlcmFjdGlvbj1ub25zdG9wbW9kZSAtaGFsdC1vbi1lcnJvciAke2ZpbGVQYXRofS50ZXhgKVxyXG4gICAgfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdENvbnZlcnNpb25DbWQoXHJcbiAgICBwYXRoVG9NYWdpY2sgOiBzdHJpbmcsXHJcbiAgICBkcGlfc2V0dGluZyA6IHN0cmluZyxcclxuICAgIGZpbGVQYXRoIDogc3RyaW5nXHJcbiAgICApeyByZXR1cm4oYCR7cGF0aFRvTWFnaWNrfSAtZGVuc2l0eSAke2RwaV9zZXR0aW5nfSAke2ZpbGVQYXRofS5wZGYgLXRyYW5zcGFyZW50IHdoaXRlICR7ZmlsZVBhdGh9LnBuZ2ApfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VUZW1wRGlyUHJlZml4UGF0aChcclxuICAgIG5hbWUgOiBzdHJpbmdcclxuICAgICl7IHJldHVybiBwYXRoLmpvaW4ob3MudG1wZGlyKCksbmFtZSkgfVxyXG5cclxuXHJcbi8vIGNvbnN0IHJlc3VsdCA9IGZvcm1hdExhdGV4Q29kZShcIlxcXFxkb2N1bWVudGNsYXNze3N0YW5kYWxvbmV9XCIsXCJcXFxcdXNlcGFja2FnZXthbXNtYXRofVwiLFwiJHheMiQgaXMgYSBjb29sIGZ1bmN0aW9uXCIpXHJcbi8vIGNvbnN0IHJlc3VsdCA9IGZvcm1hdENvbXBpbGF0aW9uQ21kKFwiXFxcXHVzZXJJc0dvb25cIixcImdvb25cIilcclxuXHJcbi8vIGNvbnNvbGUubG9nKHJlc3VsdCkiXX0=